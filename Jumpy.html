<!DOCTYPE html>
<!-- This is based on DillingerLee's great template here:
https://github.com/Team-Code/KA_Offline -->
<html> 
 <head>
    <title>Jumpy</title> 
</head>
 <body>
    <p align="center"> 
	<!--This draws the Canvas on the webpage -->
      <canvas id="mycanvas"></canvas> 
    </p>
 </body>
 
 <!-- Run all the JavaScript stuff -->
 <!-- Include the processing.js library -->
 <!-- See https://khanacademy.zendesk.com/hc/en-us/articles/202260404-What-parts-of-ProcessingJS-does-Khan-Academy-support- for differences -->
 <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script> 
 
 <script>
    var sketchProc = function(processingInstance) {
     with (processingInstance) {
        size(400, 400); 
        // frameRate(30);
        //TO DO: fix double jumping glitch
        // ProgramCodeGoesHere
      //WARNING: YOU HAVE TO TAKE LESS THAN 160 MILLISECONDS TO JUMP SO PRESS THE JUMP BUTTON QUICKLY OTHERWISE IT WONT WORK!
//pre game stuff{
var jumpy = false
var score=0;
noStroke();
var coinobj = {
    x:0,
    y:329,
    height:37,
    width:37
}
var velocity = 0;
var y = 329;
var money = 100;
var scene = 6;
var xposa = 64;
var keys = [];
var e = 4;
var xpl=0;
var g = 0.2;
var keyPressed = function(){
   setTimeout(function(){ keys[keyCode] = true; }, 160);
};
var jump = function(){
// velocity=-6;
  player.y = min(player.y + velocity, 329);


};
var playerR = 255
var playerG = 255
var playerB = 255
var player = {
    x:xposa,
    y:y,
    height:35,
    width:35
   
   
}
var greenbought = "Cost: 20";
var greencost=20;
var air = false;
var keyReleased = function(){
keys[keyCode] = false;
};

frameRate(60);
//}
draw= function() {
if (jumpy ===true){
    jump();
}
//   var isPlayerInsidecoin = function(player) {
//     return (x >= player.x &&
//             x <= (player.x+player.width) &&
          
//             y <= (player.y+player.height));
// };
//   if(keyIsPressed){
//   air=true;
// }else{
//     air=false;
// }
if(player.y<329){
    air=true
}else{air=false}
    if(scene===0){
        background(0, 255, 255);
        fill(0, 0, 0);
        textSize(40);
        text("Jumpy",140,101);
    var btn1 = {
    x: 146,
    y: 146+30,
    width: 100,
    height: 50
};
var btn2 = {
    x: 145,
    y: 200+30,
    width: 100,
    height: 50
};
var btn3 = {
    x: 145,
    y: 255+30,
    width: 100,
    height: 50
};

var drawButton = function(btn) {
    fill(0, 255, 55);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(0, 0, 0);
    textSize(19);
    textAlign(LEFT, TOP);
    text("    Play", btn.x+10, btn.y+btn.height/4);
};
var drawButton2 = function(btn) {
    fill(4, 255, 0);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(0, 0, 0);
    textSize(19);
    textAlign(LEFT, TOP);
    text("  How to", btn.x+10, btn.y+btn.height/4);
};
var drawButton3 = function(btn) {
    fill(0, 255, 26);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(0, 0, 0);
    textSize(19);
    textAlign(LEFT, TOP);
    text("  Shop", btn.x+10, btn.y+btn.height/4);
};

var isMouseInside = function(btn) {
    return (mouseX >= btn.x &&
            mouseX <= (btn.x+btn.width) &&
            mouseY >= btn.y && 
            mouseY <= (btn.y+btn.height));
};
mouseClicked = function() {
    if (isMouseInside(btn1)&&scene===0){
        scene=3;
        
    } else if (isMouseInside(btn2)&&scene===0){
        
    scene = 1; 
    
    } else if (isMouseInside(btn3)&&scene===0){
        scene=6;
        
    
    }
};
drawButton(btn1);
drawButton2(btn2);
drawButton3(btn3);

    }//first scene not dun
    if(scene===1){
        background(0, 255, 255);
        textSize(40);
        text("How To",134,26);
        textSize(19);
        text("          Press the up key to jump\nCollect coins to buy skins at the shop\n          If you hit a spike, you die",48,144);
   
var btn2 = {
    x: 170,
    y: 312,
    width: 80,
    height: 50
};
var drawButton = function(btn) {
    fill(0, 255, 102);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(0, 0, 0);
    textSize(19);
    textAlign(LEFT, TOP);
    text(" Home", btn.x+10, btn.y+btn.height/4);
};
var isMouseInside = function(btn) {
    return (mouseX >= btn.x &&
            mouseX <= (btn.x+btn.width) &&
            mouseY >= btn.y && 
            mouseY <= (btn.y+btn.height));
};
mouseClicked = function() {
    if (isMouseInside(btn2))     {
        
        scene=0;
    
    } 
};
drawButton(btn2);
    
    }//how to dun
    if(scene===2){
        background(0, 255, 255);
    textSize(40);
    text("Shop",160,46);
    var btn2 = {
    x: 170,
    y: 312,
    width: 80,
    height: 50
};
 var btn3 = {
    x: 21,
    y: 122,
    width: 100,
    height: 157
};
var drawButton2 = function(btn) {
    fill(0, 255,0);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(0, 0, 0);
    textSize(19);
    textAlign(LEFT, TOP);
    text(" Back", btn.x+10, btn.y+btn.height/4);
};
var drawButton3 = function(btn) {
    fill(0,0,0);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(255, 255, 255);
    textSize(19);
    textAlign(LEFT, TOP);
    text("  Green \n   Dude\n"+greenbought, btn.x+10, btn.y+btn.height/4);
};

var isMouseInside = function(btn) {
    return (mouseX >= btn.x &&
            mouseX <= (btn.x+btn.width) &&
            mouseY >= btn.y && 
            mouseY <= (btn.y+btn.height));
};
mouseClicked = function() {
    if (isMouseInside(btn2))     {
        
        scene=6;
    
    
        
    } else if(isMouseInside(btn3)&&money>=20){
        greenbought=" (Owned)"
        money-=greencost
        greencost=0
        playerR=0
        playerG=255
        playerB=0
        //buy skin
    }

    
};
drawButton2(btn2);
  drawButton3(btn3);  
 fill(0,255,0)
rect(54, 236, 35, 35, 5)
fill(0)
ellipse(63,246,9,9);
     ellipse(80,246,9,9);
     
    }//shop skins not dun
    if(scene===3){
        score+=1/60
        background(0, 255, 255);
        noStroke();
        fill(playerR, playerG, playerB);
        rect(player.x,player.y,player.width,player.height,5);
        fill(0, 0, 0);
        ellipse(73,player.y+10,9,9);
        ellipse(91,player.y+10,9,9);
         //drawing stuff{
          var grass = function(x,y){
            noStroke();
            fill(122, 0, 0);
        rect(x,y,35,35,2);
        fill(0, 255, 17);
        rect(x+0,y+0,5,5);
        rect(x+5,y+0,5,5);
        rect(x+0,y+0,35,5);
        rect(x+5,y+0,30,10);
        fill(122, 0, 17);
        rect(x+10,y+5,5,5);
        rect(x+26,y+5,5,5);
        rect(x+30,y+5,5,5);
        };
          var spike = function(x,y){
          fill(148, 148, 148);
          triangle(x+-25,y,x+-7,y+-37,x+10,y);
          };
          var coin = function(x,y){
          fill(255, 255, 0);
          ellipse(coinobj.x+x,y,coinobj.width,coinobj.height);
          fill(179, 172, 68);
          ellipse(x,y,25,25);
          fill(255, 255, 0);
          ellipse(x,y,23,23);
          };
         
    var x = 0;//grass
    var x2 = 260;//spikes
    var x3=430;//coins
  
    while(x<8000){
    grass(x+xpl,364);
     spike(xpl+x2-20,365);
    coin(xpl+x3-20,263);
    
    if(player.x+35>=xpl+x2&&player.x<=xpl+x2&&player.y>=365-37){
      scene=4;
//   println("")
       
   }
   
    if(player.x+35>=xpl+x3&&player.x<=xpl+x3&&player.y<=365-37){
      
   money+=1/18;
       
   }
    x+=35;
  x2+=170;
  x3+=170*4;
    }
     grass(xpl,364);
    spike(xpl+430-20,365);
    coin(xpl+430-20,263);
    spike(xpl+600-20,365)
    spike(xpl+770-20,365)
    spike(xpl+260-20,365)
    // spike5(xpl+90,365)
    xpl-=2;
   
  //negative is <-- that way
  if(player.x+35>=xpl+430&&player.x<=xpl+430){
    //   scene=4;
    if(player.y>=365-37){
  println("");
    }else{
        money+=1/18;
    }
  }//spike w/ coin
 
    if(player.x+35>=xpl+600&&player.x<=xpl+600&&player.y>=365-37){
      scene=4;
  println("")
       
  }
   
  if(xpl<-7600){
      scene=5;
      xpl=0;
    //   println("bap")
       
  }
         //}
    //   if(!x >= player.x &&x <= (player.x+player.width) &&y <= (player.y+player.height)) {  //  if(!isPlayerInsidecoin(player)){
    //     money+=.02174;
    //   }
     
        
         if (keyPressed && keys[UP]) { //this checks if up arrow is pressed
    jumpy=true;
   
    
        
    
    }else{
    velocity=-6;
    }//check
 if(xpl<=-7700){
        scene=5;
        println("work")
    }
//  if(velocity>=6){
//     velocity=0;
//  y = 329;
 
//  }
    }//game not dun
    if(scene===4){
        score=0;
        xpl=0;
        background(0,0,0)
        fill(255,0,0)
        textSize(56)
        text("You died",90,100)
    var btn1 = {
    x: 146,
    y: 225+30,
    width: 100,
    height: 50
};
var drawButton = function(btn) {
    fill(255, 0,0);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(0, 0, 0);
    textSize(19);
    textAlign(LEFT, TOP);
    text("Continue?", btn.x+10, btn.y+btn.height/4);
};
var isMouseInside = function(btn) {
    return (mouseX >= btn.x &&
            mouseX <= (btn.x+btn.width) &&
            mouseY >= btn.y && 
            mouseY <= (btn.y+btn.height));
};
  mouseClicked = function() {
    if (isMouseInside(btn1)){
        scene=0;
        
    } 
};
drawButton(btn1)
    }//death scene not dun
    if(scene===6) {
        background(0, 255, 255);
    textSize(40);
    text("Shop",160,46);
    var btn2 = {
    x: 170,
    y: 312,
    width: 80,
    height: 50
};
 var btn3 = {
    x: 21,
    y: 122,
    width: 80,
    height: 50
};
var drawButton2 = function(btn) {
    fill(0, 255,0);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(0, 0, 0);
    textSize(19);
    textAlign(LEFT, TOP);
    text(" Home", btn.x+10, btn.y+btn.height/4);
};
var drawButton3 = function(btn) {
    fill(0,255,0);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(0, 0, 0);
    textSize(19);
    textAlign(LEFT, TOP);
    text(" Skins", btn.x+10, btn.y+btn.height/4);
};

var isMouseInside = function(btn) {
    return (mouseX >= btn.x &&
            mouseX <= (btn.x+btn.width) &&
            mouseY >= btn.y && 
            mouseY <= (btn.y+btn.height));
};
mouseClicked = function() {
    if (isMouseInside(btn2))     {
        
        scene=0;
    
    
        
    } else if(isMouseInside(btn3)){
        scene=2
        //buy skin
    }

    
};
drawButton2(btn2);
  drawButton3(btn3);  
//  fill(0,255,0)
// rect(54, 236, 35, 35, 5)
// fill(0)
// ellipse(63,246,9,9);
//      ellipse(80,246,9,9);
     
    }//shop main
   if(scene===7){
       
        background(0, 255, 255);
    textSize(40);
    text("Shop",160,46);
    var btn2 = {
    x: 170,
    y: 312,
    width: 80,
    height: 50
};
 var btn3 = {
    x: 21,
    y: 122,
    width: 100,
    height: 157
};
var drawButton2 = function(btn) {
    fill(0, 255,0);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(0, 0, 0);
    textSize(19);
    textAlign(LEFT, TOP);
    text(" Back", btn.x+10, btn.y+btn.height/4);
};
var drawButton3 = function(btn) {
    fill(0,0,0);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(255, 255, 255);
    textSize(19);
    textAlign(LEFT, TOP);
    text("  Green \n   Dude\n"+greenbought, btn.x+10, btn.y+btn.height/4);
};

var isMouseInside = function(btn) {
    return (mouseX >= btn.x &&
            mouseX <= (btn.x+btn.width) &&
            mouseY >= btn.y && 
            mouseY <= (btn.y+btn.height));
};
mouseClicked = function() {
    if (isMouseInside(btn2))     {
        
        scene=6;
    
    
        
    } else if(isMouseInside(btn3)&&money>=20){
        greenbought=" (Owned)"
        money-=greencost
        greencost=0
        playerR=0
        playerG=255
        playerB=0
        //buy skin
    }

    
};
drawButton2(btn2);
  drawButton3(btn3);  
 fill(0,255,0)
rect(54, 236, 35, 35, 5)
fill(0)
ellipse(63,246,9,9);
     ellipse(80,246,9,9);
     
    
   }//shop eyes(add button for this to shop main)
   
    if(y<=329){
   velocity+=g;

    }else{
    //   y+=6;
    }
  if(y<=242){
  
y+=100;
    }
   fill(0, 0, 0);
textSize(19);
text("Money: "+round(money),8,8);
text("Score: "+round(score),130,8);
text(air,127,200);
text(y,200,200)
// text(xpl+770-20,174,150);
// text(x,7,200);
 
 if(scene===5){
         var btn1 = {
    x: 146,
    y: 188+30,
    width: 100,
    height: 50
};
      background(197,197,197)
  fill(0,255,0)
  textSize(30)
  text("You won this stage! ",58,150)
 var drawButton = function(btn) {
    fill(0, 255, 55);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(0, 0, 0);
    textSize(19);
    textAlign(LEFT, TOP);
    text("Continue?", btn.x+10, btn.y+btn.height/4);
};
var isMouseInside = function(btn) {
    return (mouseX >= btn.x &&
            mouseX <= (btn.x+btn.width) &&
            mouseY >= btn.y && 
            mouseY <= (btn.y+btn.height));
};
mouseClicked = function() {
    if (isMouseInside(btn1)){
        scene=3;
        
    } 
};
drawButton(btn1)
  }//stage scene nd


//  println(xpl+770-20)
};
//Nice, 230 lines so far
 
//stop programming here
    }};

    // Get the canvas that Processing-js will use
    var canvas = document.getElementById("mycanvas"); 
    // Pass the function sketchProc (defined in myCode.js) to Processing's constructor.
    var processingInstance = new Processing(canvas, sketchProc); 
 </script>

</html>