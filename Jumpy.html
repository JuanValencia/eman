<!DOCTYPE html>
<!-- This is based on DillingerLee's great template here:
https://github.com/Team-Code/KA_Offline -->
<html> 
 <head>
    <title>Jumpy</title> 
</head>
 <body>
    <p align="center"> 
	<!--This draws the Canvas on the webpage -->
      <canvas id="mycanvas"></canvas> 
    </p>
 </body>
 
 <!-- Run all the JavaScript stuff -->
 <!-- Include the processing.js library -->
 <!-- See https://khanacademy.zendesk.com/hc/en-us/articles/202260404-What-parts-of-ProcessingJS-does-Khan-Academy-support- for differences -->
 <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script> 
 
 <script>
    var sketchProc = function(processingInstance) {
     with (processingInstance) {
        size(400, 400); 
        // frameRate(30);
        
        // ProgramCodeGoesHere
      //WARNING: YOU HAVE TO TAK LESS THAN 160 MILLISECONDS TO JUMP SO PRESS THE JUMP BUTTON QUICKLY OTHERWISE IT WONT WORK!
//pre game stuff{
noStroke();
var velocity = 0;
var y = 329;
var scene = 0;
var y = 329;
var keys = [];
var e = 4;
var xpl=0;
var g = 0.2;
var keyPressed = function(){
   setTimeout(function(){ keys[keyCode] = true; }, 160);
};
var jump = function(){
// velocity=-6;
  y = min(y + velocity, 329);


};
// var air = false;
var keyReleased = function(){
keys[keyCode] = false;
};

frameRate(60);
//}
draw= function() {
  
//   if(y<329){
//   air=true;
// }else{
//     air=false;
// }
    if(scene===0){
        background(0, 255, 255);
        fill(0, 0, 0);
        textSize(40);
        text("Jumpy",140,101);
    var btn1 = {
    x: 146,
    y: 146+30,
    width: 100,
    height: 50
};
var btn2 = {
    x: 145,
    y: 200+30,
    width: 100,
    height: 50
};
var btn3 = {
    x: 145,
    y: 255+30,
    width: 100,
    height: 50
};

var drawButton = function(btn) {
    fill(0, 255, 55);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(0, 0, 0);
    textSize(19);
    textAlign(LEFT, TOP);
    text("    Play", btn.x+10, btn.y+btn.height/4);
};
var drawButton2 = function(btn) {
    fill(4, 255, 0);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(0, 0, 0);
    textSize(19);
    textAlign(LEFT, TOP);
    text("  How to", btn.x+10, btn.y+btn.height/4);
};
var drawButton3 = function(btn) {
    fill(0, 255, 26);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(0, 0, 0);
    textSize(19);
    textAlign(LEFT, TOP);
    text("  Shop", btn.x+10, btn.y+btn.height/4);
};

var isMouseInside = function(btn) {
    return (mouseX >= btn.x &&
            mouseX <= (btn.x+btn.width) &&
            mouseY >= btn.y && 
            mouseY <= (btn.y+btn.height));
};
mouseClicked = function() {
    if (isMouseInside(btn1)&&scene===0){
        scene=3;
        
    } else if (isMouseInside(btn2)&&scene===0){
        
    scene = 1; 
    
    } else if (isMouseInside(btn3)&&scene===0){
        scene=2;
        
    
    }
};
drawButton(btn1);
drawButton2(btn2);
drawButton3(btn3);

    }//first scene not dun
    if(scene===1){
        background(0, 255, 255);
        textSize(40);
        text("How To",134,26);
        textSize(19);
        text("          Press the up key to jump\nCollect coins to buy skins at the shop\n          If you hit a spike, you die",48,144);
   
var btn2 = {
    x: 170,
    y: 312,
    width: 80,
    height: 50
};
var drawButton = function(btn) {
    fill(0, 255, 102);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(0, 0, 0);
    textSize(19);
    textAlign(LEFT, TOP);
    text(" Home", btn.x+10, btn.y+btn.height/4);
};
var isMouseInside = function(btn) {
    return (mouseX >= btn.x &&
            mouseX <= (btn.x+btn.width) &&
            mouseY >= btn.y && 
            mouseY <= (btn.y+btn.height));
};
mouseClicked = function() {
    if (isMouseInside(btn2))     {
        
        scene=0;
    
    } 
};
drawButton(btn2);
    
    }//how to dun
    if(scene===2){
        background(0, 255, 255);
    textSize(40);
    text("Shop",160,46);
    var btn2 = {
    x: 170,
    y: 312,
    width: 80,
    height: 50
};
var drawButton = function(btn) {
    fill(0, 255, 102);
    rect(btn.x, btn.y, btn.width, btn.height, 5);
    fill(0, 0, 0);
    textSize(19);
    textAlign(LEFT, TOP);
    text(" Home", btn.x+10, btn.y+btn.height/4);
};
var isMouseInside = function(btn) {
    return (mouseX >= btn.x &&
            mouseX <= (btn.x+btn.width) &&
            mouseY >= btn.y && 
            mouseY <= (btn.y+btn.height));
};
mouseClicked = function() {
    if (isMouseInside(btn2))     {
        
        scene=0;
    
    } 
};
drawButton(btn2);
    
    }//shop not dun
    if(scene===3){
       
        background(0, 255, 255);
        noStroke();
        fill(255, 255, 255);
        rect(64,y,35,35,5);
        fill(0, 0, 0);
        ellipse(73,y+10,9,9);
        ellipse(91,y+10,9,9);
         //drawing stuff{
          var grass = function(x,y){
            noStroke();
            fill(122, 0, 0);
        rect(x,y,35,35,2);
        fill(0, 255, 17);
        rect(x+0,y+0,5,5);
        rect(x+5,y+0,5,5);
        rect(x+0,y+0,35,5);
        rect(x+5,y+0,30,10);
        fill(122, 0, 17);
        rect(x+10,y+5,5,5);
        rect(x+26,y+5,5,5);
        rect(x+30,y+5,5,5);
        };
          var spike = function(x,y){
          fill(148, 148, 148);
          triangle(x+-25,y,x+-7,y+-37,x+10,y);
          };
          var coin = function(x,y){
          fill(255, 255, 0);
          ellipse(x,y,37,37);
          fill(179, 172, 68);
          ellipse(x,y,25,25);
          fill(255, 255, 0);
          ellipse(x,y,23,23);
          };
    var x = 0;//grass
    var x2 = 0;//spikes
    var x3 = 0;//coins
    while(x<8000){
    grass(x+xpl,364);
    spike(x2+xpl,365);
    coin(x3+xpl,263);
    x+=35;
    x2+=200;
    x3+=800;
    }
    xpl-=2;
    
         //}
      
     
     
        
         if (keyPressed && keys[UP]) { //this checks if up arrow is pressed
    jump();
    
    
        
    
    }else{
    velocity=-6;
    }//check
//  if(velocity>=6){
//     velocity=0;
//  y = 329;
 
//  }
    }//game not dun
    if(scene===4){
        
    }//death scene not dun
    if(y<=329){
   velocity+=g;

    }else{
    //   y+=6;
    }
  if(y<=242){
  
y+=100;
    }
   fill(0, 0, 0);
textSize(25);
text(velocity,240,200);
text(y,127,200);
text(min(y,242),174,150);
// text(air,65,200);

};
//Nice, 230 lines so far


    }};

    // Get the canvas that Processing-js will use
    var canvas = document.getElementById("mycanvas"); 
    // Pass the function sketchProc (defined in myCode.js) to Processing's constructor.
    var processingInstance = new Processing(canvas, sketchProc); 
 </script>

</html>